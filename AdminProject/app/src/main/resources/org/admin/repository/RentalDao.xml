<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.admin.repository.RentalDao">
    <resultMap id="RentalMap" type="Rental">
        <id column="rental_home_no" property="rentalNo"/>
        <result column="region_no" property="regionNo"/>
        <result column="name" property="name"/>
        <result column="explanation" property="explanation"/>
        <result column="address" property="address"/>
        <result column="price" property="price"/>
        <result column="clean_fee" property="cleanFee"/>
        <result column="capacity" property="capacity"/>
        <result column="state" property="state"/>
        <result column="registe_date" property="regDate"/>

        <association property="host" javaType="Member">
            <id column="host_no" property="memberNo"/>
            <result column="host_name" property="name"/>
        </association>
    </resultMap>



    <select id="findAll" resultMap="RentalMap">
        SELECT
            rh.rental_home_no,
            rh.name,
            m.name as host_name,
            m.member_no as host_no,
            rh.registe_date,
            rh.state
        FROM rental_home rh
        INNER JOIN member m ON rh.member_no = m.member_no
        WHERE rh.state != '0'
    </select>

    <select id="findApplied" resultMap="RentalMap">
        SELECT
            rh.rental_home_no,
            rh.name,
            m.name as host_name ,
            m.member_no as host_no,
            rh.registe_date,
            rh.state
        FROM rental_home rh
        INNER JOIN member m ON rh.member_no = m.member_no
        WHERE rh.state = '0'
    </select>
</mapper>