<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>한달살기-관리자페이지</title>
    <link rel="stylesheet" type="text/css"  href="../css/form.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.8/handlebars.min.js" integrity="sha512-E1dSFxg+wsfJ4HKjutk/WaCzK7S2wv1POn1RRPGh8ZK+ag9l244Vqxji3r6wgz9YBf6+vhQEYJZpSjqWFPg9gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
<div id="mainHeader">
    <img id="logo" src="https://5ns6sjke2756.edge.naverncp.com/nBMc0TCJiv/logo/newLogo2.png?type=w_sh&w=150&quality=100&sharp_amt=1.0&ttype=png"/>
    <h1 id="title">관리자 페이지</h1>
</div>
<div class="login">
    <form id="loginForm">
        <div id="email"> <input type="text" name="email" placeholder="이메일"/></div>
        <div id="pw"><input type="password" name="password" placeholder="비밀번호"/></div>
        <button type="button" id="signIn">로그인</button>
    </form>
    <!-- <a data-th-href="@{/signup}">가입하기</a> -->
</div>

<script src="/js/common.js"></script>
<script src="/js/page-init.js"></script>
<script>
    $('#signIn').click((e) => {
        let email = $('#email').children().first().val();
        let pw = $('#pw').children().first().val();
        let jsonData = {
                email: email,
                password: pw
            }
        $.ajax({
            url: `${RESTAPI_HOST}/auth/login`,
            type: 'POST',
            contentType: 'application/json',
            dataType: 'json',
            data: JSON.stringify(jsonData),

            success: (response) => {
                console.log(response.accessToken);
                sessionStorage.setItem('accessToken', response.accessToken);
                sessionStorage.setItem('refreshToken', response.refreshToken);
                window.location.href = '/home';
            },
            error: (error) => {
                alert('유효하지 않거나 권한이 없습니다.')
            }
        });
    });


</script>
</body>
</html>





