<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>비트캠프 데브옵스 5기</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<link rel="stylesheet" type="text/css" href="board.css">

<div data-th-replace="header :: header">머리말</div>
<h1 data-th-text="${boardName}">게시판</h1>

<div id="header">
  <!-- 게시판 버튼 -->
  <button type="button" name="review" onclick="location.href='/board/list?categoryNo=0'">후기게시판</button>
  <button type="button" name="inform" onclick="location.href='/board/list?categoryNo=1'">정보공유게시판</button>
  <button type="button" name="community" onclick="location.href='/board/list?categoryNo=2'">자유게시판</button>

  <!-- 검색 폼 -->
  <form id="search-form" action="/board/search" data-th-action="@{search}" method="GET">
    <input type="hidden" data-th-name="categoryNo" data-th-value="*{categoryNo}">
    <select name="type">
      <option value="title">제목</option>
      <option value="content">내용</option>
    </select>
    <input type="text" id="search-input" name="keyword" placeholder="검색어를 입력하세요" value="">
    <button id="search-button">검색</button>
  </form><tr>

  <!-- 글쓰기 버튼 -->
  <a id="write-button" data-th-href="@{form(categoryNo=*{categoryNo})}" href="form">글쓰기</a>
  <i class="fa-solid fa-pen"></i>
</div>

<!-- 게시판 -->
<thead>
<!-- 후기 게시판 카드형식 목록 -->
<tr data-th-if="*{categoryNo == 0}" data-no="1">
  <div class="container">
    <div class="card-deck">
      <div data-th-each="board : ${list}" data-th-object="${board}" class="card">
        <div class="card-thumbnail-container">
          <div class="card-region" data-th-text="${board.region != null ? board.region.regionName : '미정'}">지역명</div>
          <!--  thumbnail-->
          <!-- Image Slider Container -->
          <div class="slider">
            <div class="slides">
              <div data-th-each="boardFile : ${fileList}" data-th-if="${board.boardNo} == ${boardFile.boardNo}" class="slide">
                <img data-th-src="|https://kr.object.ncloudstorage.com/tp3-salaba/board/review/${boardFile.uuidFileName}|" alt="thumbnail">
              </div>
            </div>
          </div>
        <div class="card-body">
            <h3><a  data-th-href="@{view(categoryNo=0,boardNo=*{boardNo})}" data-th-text="*{title}"
                    href="view.html" onclick="return false;">제목:제목입니다.</a></h3>
            <p class="card-text">작성자: <span data-th-text="${board.writer.nickname}">홍길동</span></p>
            <p class="card-text">작성일: <span data-th-text="${#dates.format(board.createdDate,'yyyy-MM-dd')}">2024-03-27</span></p>
            <i class="fa-solid fa-heart"> <span data-th-text="${board.likeCount}"></span></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</tr>
</thead>
</table>

<!-- 정보공유 게시판-->
<table border='1'>
  <thead>
  <tr data-th-if="*{categoryNo == 1}" data-no="2">
    <th>분류</th>
    <th>제목</th>
    <th>작성자</th>
    <th>작성일</th>
    <th>추천수</th>
    <th>조회수</th>
  </tr>
  </thead>
  <tbody>
  <!-- 조건부 렌더링: 공지사항과 일반 게시글 분리 -->
  <tr data-th-if="*{categoryNo == 1}"
      data-th-each="board : ${list}"
      data-th-object="${board}"
      data-th-class="${board.headNo == 1 ? 'announcement' : 'regular'}"
      data-th-style="${board.headNo == 1 ? 'color: red;' : ''}">
    <td data-th-text="${board.headContent}">분류 내용</td>
    <td>
      <a data-th-href="@{view(categoryNo=1,boardNo=${board.boardNo})}" href="view.html" onclick="return false;">
        <span data-th-text="*{title}">제목입니다.</span>
        <!-- 파일 아이콘을 첨부파일이 있는 경우에만 표시 -->
        <i data-th-if="${board.fileCount > 0}" class="fa-regular fa-file"></i>
      </a>
    </td>
    <td data-th-text="*{writer.nickname}">홍길동</td>
    <td data-th-text="${#dates.format(board.createdDate,'yyyy-MM-dd')}">2024-03-27</td>
    <td data-th-text="${board.likeCount}"></td>
    <td data-th-text="${board.viewCount}"></td>
  </tr>
  </tbody>
</table>



<!-- 자유게시판 -->
<table border='1'>
  <thead>
  <tr data-th-if="*{categoryNo == 2}" data-no="3">
    <th>분류</th> <!-- headName -->
    <th>제목</th>
    <th>작성자</th>
    <th>작성일</th>
    <th>추천수</th>
    <th>조회수</th> <!-- 목록에서는 정보공유 게시판과 자유 게시판에서만 표시됨 -->
  </tr>
  </thead>
  <tbody>
  <tr data-th-if="*{categoryNo == 2}"
      data-th-each="board : ${list}"
      data-th-object="${board}"
      data-th-class="${board.headNo == 1 ? 'announcement' : 'regular'}"
      data-th-style="${board.headNo == 1 ? 'color: red;' : ''}">
    <td data-th-text="${board.headContent}">분류 내용</td>
    <td>
      <a data-th-href="@{view(categoryNo=2,boardNo=${board.boardNo})}" href="view.html" onclick="return false;">
        <span data-th-text="*{title}">제목입니다.</span>
        <!-- 파일 아이콘을 첨부파일이 있는 경우에만 표시 -->
        <i data-th-if="${board.fileCount > 0}" class="fa-regular fa-file"></i>
      </a>
    </td>
    <td data-th-text="*{writer.nickname}">홍길동</td>
    <td data-th-text="${#dates.format(board.createdDate,'yyyy-MM-dd')}">2024-03-27</td>
    <td data-th-text="${board.likeCount}"></td>
    <td data-th-text="${board.viewCount}"></td>
  </tr>
  </tbody>
</table>


<!-- 페이지네이션: 게시판용 페이징처리 적용-->
<nav aria-label="Page navigation example" data-th-if="${categoryNo != 0}">
  <ul class="pagination">
    <!-- '이전' 페이지 버튼 -->
    <li class="page-item" data-th-classappend="${pageNo == 1} ? 'disabled' : ''">
      <a class="page-link" data-th-if="${pageNo > 1}" data-th-href="@{list(categoryNo=*{categoryNo}, pageNo=${pageNo - 1}, pageSize=${pageSize})}" href="#" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
      <span class="page-link" data-th-unless="${pageNo > 1}" aria-hidden="true">&laquo;</span>
    </li>

    <!-- 동적 페이지 번호 링크 -->
    <li data-th-each="i : ${#numbers.sequence(1, numOfPage)}" class="page-item" data-th-classappend="${pageNo == i} ? 'active' : ''">
      <a class="page-link" data-th-href="@{list(categoryNo=*{categoryNo}, pageNo=${i}, pageSize=${pageSize})}" data-th-text="${i}" href="#">1</a>
    </li>

    <!-- '다음' 페이지 버튼 -->
    <li class="page-item" data-th-classappend="${pageNo == numOfPage} ? 'disabled' : ''">
      <a class="page-link" data-th-if="${pageNo < numOfPage}" data-th-href="@{list(categoryNo=*{categoryNo}, pageNo=${pageNo + 1}, pageSize=${pageSize})}" href="#" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
      <span class="page-link" data-th-unless="${pageNo < numOfPage}" aria-hidden="true">&raquo;</span>
    </li>
  </ul>
</nav>


<div data-th-replace="footer :: footer">꼬리말</div>

<script data-th-src="@{/board/list.js}"></script>

</body>
</html>